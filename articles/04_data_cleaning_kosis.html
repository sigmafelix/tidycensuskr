<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Cleaning: From KOSIS Raw Data to Tidy Format • tidycensuskr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Cleaning: From KOSIS Raw Data to Tidy Format">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidycensuskr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01_intro.html">Introduction to tidycensuskr</a></li>
    <li><a class="dropdown-item" href="../articles/02_examples_with_ggplot.html">Untitled</a></li>
    <li><a class="dropdown-item" href="../articles/03_anycensus.html">Regional Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/04_data_cleaning_kosis.html">Data Cleaning: From KOSIS Raw Data to Tidy Format</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sigmafelix/tidycensuskr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data Cleaning: From KOSIS Raw Data to Tidy Format</h1>
            
            <h4 data-toc-skip class="date">2025-08-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sigmafelix/tidycensuskr/blob/main/vignettes/04_data_cleaning_kosis.Rmd" class="external-link"><code>vignettes/04_data_cleaning_kosis.Rmd</code></a></small>
      <div class="d-none name"><code>04_data_cleaning_kosis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to clean and transform raw Korean
census data from the Korean Statistical Information Service (KOSIS) API
into a tidy, analysis-ready format. While there are existing R packages
for accessing Korean statistical data (such as the <code>kosis</code>
package for general KOSIS data access), <strong>there are currently no
readily available software solutions specifically designed for
retrieving and processing Korean census data in a tidy,
analysis-friendly format</strong> for demographic and socioeconomic
research.</p>
<div class="section level3">
<h3 id="the-challenge">The Challenge<a class="anchor" aria-label="anchor" href="#the-challenge"></a>
</h3>
<p>Korean census and administrative data presents several challenges for
researchers:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Complex API URLs</strong>: KOSIS APIs require detailed
parameter specifications with cryptic codes</li>
<li>
<strong>Multiple data sources</strong>: Different datasets
(population, tax, mortality) come from different API endpoints</li>
<li>
<strong>Inconsistent formatting</strong>: Raw data often comes in
wide format with Korean-language column names</li>
<li>
<strong>Administrative code mapping</strong>: Different datasets use
different administrative code systems</li>
<li>
<strong>Data integration</strong>: Combining multiple datasets
requires careful matching of administrative units</li>
</ol>
<p>This vignette shows how the <code>tidycensuskr</code> package
addresses these challenges by providing pre-processed, tidy datasets and
demonstrating the underlying data cleaning workflow.</p>
</div>
</div>
<div class="section level2">
<h2 id="raw-data-sources">Raw Data Sources<a class="anchor" aria-label="anchor" href="#raw-data-sources"></a>
</h2>
<p>The data cleaning process involves retrieving data from multiple
KOSIS API endpoints:</p>
<div class="section level3">
<h3 id="tax-data-general-tax-revenue">1. Tax Data (General Tax Revenue)<a class="anchor" aria-label="anchor" href="#tax-data-general-tax-revenue"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_tax_general</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"https://kosis.kr/openapi/Param/statisticsParameterData.do?method=getList&amp;apiKey=인증키없음&amp;itmId=T001+&amp;objL1=A0201+A0202+A0203+A0204+A0205+A0206+A0207+A0208+A0209+A0210+A0211+A0212+A0213+A0214+A0215+A0216+A0217+A0218+A0219+A0220+A0221+A0222+A0223+A0224+A0225+A0301+A0302+A0303+A0304+A0305+A0306+A0307+A0308+A0309+A0310+A0401+A0402+A0403+A0404+A0405+A0406+A0407+A0408+A0409+A0410+A0411+A0412+A0413+A0414+A0415+A0416+A0417+A0418+A0419+A0420+A0421+A0422+A0423+A0424+A0425+A0426+A0427+A0428+A0429+A0430+A0431+A0501+A0502+A0503+A0504+A0505+A0506+A0507+A0508+A0509+A0510+A0511+A0512+A0513+A0514+A0515+A0516+A0517+A0518+A0601+A0602+A0603+A0604+A0605+A0701+A0702+A0703+A0704+A0705+A0706+A0707+A0708+A0709+A0710+A0711+A0801+A0802+A0803+A0804+A0805+A0806+A0807+A0808+A0809+A0810+A0811+A0812+A0813+A0814+A0815+A09+A1001+A1002+A1003+A1004+A1005+A1101+A1102+A1103+A1104+A1105+A1106+A1107+A1108+A1109+A1110+A1111+A1112+A1113+A1114+A1201+A1202+A1203+A1204+A1205+A1206+A1207+A1208+A1209+A1210+A1211+A1212+A1213+A1214+A1215+A1216+A1217+A1218+A1219+A1220+A1221+A1222+A1309+A1301+A1302+A1303+A1304+A1305+A1306+A1307+A1308+A1401+A1402+A1403+A1404+A1405+A1406+A1407+A1408+A1409+A1410+A1411+A1412+A1413+A1414+A1415+A1416+A1417+A1418+A1419+A1420+A1421+A1422+A1423+A1501+A1502+A1503+A1504+A1505+A1506+A1507+A1508+A1509+A1510+A1511+A1512+A1513+A1514+A1515+A1516+A1601+A1602+A1603+A1604+A1605+A1701+A1702+A1703+A1704+A1705+A1706+A1707+A1708+A1709+A1710+A1711+A1712+A1713+A1714+A1715+A1716+A1717+A1718+A1802+A1801+&amp;objL2=15133SGH0M+&amp;objL3=&amp;objL4=&amp;objL5=&amp;objL6=&amp;objL7=&amp;objL8=&amp;format=json&amp;jsonVD=Y&amp;prdSe=Y&amp;newEstPrdCnt=1&amp;outputFields=TBL_ID+TBL_NM+OBJ_ID+OBJ_NM+OBJ_NM_ENG+NM+NM_ENG+ITM_ID+ITM_NM+ITM_NM_ENG+UNIT_NM+UNIT_NM_ENG+&amp;orgId=133&amp;tblId=DT_133N_A3212"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="income-tax-data">2. Income Tax Data<a class="anchor" aria-label="anchor" href="#income-tax-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_tax_income</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"https://kosis.kr/openapi/Param/statisticsParameterData.do?method=getList&amp;apiKey=&amp;itmId=T001+T002+&amp;objL1=A0101+A0102+A0103+A0104+A0105+A0106+A0107+A0108+A0109+A0110+A0111+A0112+A0113+A0114+A0115+A0116+A0117+A0118+A0119+A0120+A0121+A0122+A0123+A0124+A0125+A0201+A0202+A0204+A0205+A0203+A0206+A0207+A0208+A0209+A0210+A0301+A0302+A0303+A0304+A0305+A0306+A0307+A0308+A0309+A0310+A0311+A0312+A0313+A0314+A0315+A0316+A0317+A0318+A0319+A0320+A0321+A0322+A0323+A0324+A0325+A0326+A0327+A0328+A0329+A0330+A0331+A0401+A0402+A0403+A0404+A0405+A0406+A0407+A0408+A0409+A0410+A0411+A0412+A0413+A0414+A0415+A0416+A0417+A0418+A0501+A0502+A0503+A0504+A0505+A0601+A0602+A0603+A0604+A0605+A0606+A0607+A0608+A0609+A0610+A0611+A0701+A0702+A0703+A0704+A0705+A0706+A0707+A0708+A0709+A0710+A0711+A0712+A0713+A0714+A0715+A08+A0901+A0902+A0903+A0904+A0905+A1001+A1002+A1003+A1004+A1005+A1006+A1007+A1008+A1009+A1010+A1011+A1012+A1013+A1014+A1101+A1102+A1103+A1104+A1105+A1106+A1107+A1108+A1109+A1110+A1111+A1112+A1113+A1114+A1115+A1116+A1117+A1118+A1119+A1120+A1121+A1122+A1201+A1202+A1203+A1204+A1205+A1206+A1207+A1208+A1301+A1302+A1303+A1304+A1305+A1306+A1307+A1308+A1309+A1310+A1311+A1312+A1313+A1314+A1315+A1316+A1317+A1318+A1319+A1320+A1321+A1322+A1323+A1401+A1402+A1403+A1404+A1405+A1406+A1407+A1408+A1409+A1410+A1411+A1412+A1413+A1414+A1415+A1416+A1501+A1502+A1503+A1504+A1505+A1601+A1602+A1603+A1604+A1605+A1606+A1607+A1608+A1609+A1610+A1611+A1612+A1613+A1614+A1615+A1616+A1617+A1618+A1701+A1702+&amp;objL2=ALL&amp;objL3=&amp;objL4=&amp;objL5=&amp;objL6=&amp;objL7=&amp;objL8=&amp;format=json&amp;jsonVD=Y&amp;prdSe=Y&amp;newEstPrdCnt=1&amp;outputFields=TBL_ID+TBL_NM+OBJ_ID+OBJ_NM+OBJ_NM_ENG+NM+NM_ENG+ITM_NM+ITM_NM_ENG+UNIT_NM+UNIT_NM_ENG+&amp;orgId=133&amp;tblId=DT_133001N_4214"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mortality-data">3. Mortality Data<a class="anchor" aria-label="anchor" href="#mortality-data"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_mortality</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"https://kosis.kr/openapi/Param/statisticsParameterData.do?method=getList&amp;apiKey=&amp;itmId=T7+&amp;objL1=0+&amp;objL2=11010+11020+11030+11040+11050+11060+11070+11080+11090+11100+11110+11120+11130+11140+11150+11160+11170+11180+11190+11200+11210+11220+11230+11240+11250+21010+21020+21030+21040+21050+21060+21070+21080+21090+21100+21110+21120+21130+21140+21150+21310+21510+22010+22020+22030+22040+22050+22060+22070+22310+22510+22520+23010+23020+23030+23040+23050+23060+23070+23080+23090+23310+23320+23510+23520+24010+24020+24030+24040+24050+25010+25020+25030+25040+25050+26010+26020+26030+26040+26310+26510+29010+31010+31011+31012+31013+31014+31020+31021+31022+31023+31030+31040+31041+31042+31050+31051+31052+31053+31060+31070+31080+31090+31091+31092+31100+31101+31102+31103+31104+31110+31120+31130+31140+31150+31160+31170+31180+31190+31191+31192+31193+31200+31210+31220+31230+31240+31250+31260+31270+31280+31310+31320+31330+31340+31350+31360+31370+31380+31550+31570+31580+32010+32020+32030+32040+32050+32060+32070+32310+32320+32330+32340+32350+32360+32370+32380+32390+32400+32410+32510+32520+32530+32540+32550+32560+32570+32580+32590+32600+32610+33010+33011+33012+33020+33030+33040+33041+33042+33043+33044+33310+33320+33330+33340+33350+33360+33370+33380+33390+33520+33530+33540+33550+33560+33570+33580+33590+34010+34011+34012+34020+34030+34040+34050+34060+34070+34080+34310+34320+34330+34340+34350+34360+34370+34380+34390+34400+34510+34530+34540+34550+34560+34570+34580+35010+35011+35012+35020+35030+35040+35050+35060+35310+35320+35330+35340+35350+35360+35370+35380+35510+35520+35530+35540+35550+35560+35570+35580+36010+36020+36030+36040+36060+36310+36320+36330+36350+36360+36370+36380+36390+36400+36410+36420+36430+36440+36450+36460+36470+36480+36510+36520+36530+36550+36560+36570+36580+36590+36600+36610+36620+36630+36640+36650+36660+36670+36680+37010+37011+37012+37020+37030+37040+37050+37060+37070+37080+37090+37100+37310+37320+37330+37340+37350+37360+37370+37380+37390+37400+37410+37420+37430+37520+37530+37540+37550+37560+37570+37580+37590+37600+37610+37620+37630+38010+38020+38021+38022+38030+38040+38050+38060+38110+38111+38112+38113+38114+38115+38070+38080+38090+38100+38310+38320+38330+38340+38350+38360+38370+38380+38390+38400+38510+38520+38530+38540+38550+38560+38570+38580+38590+38600+39010+39020+39310+39320+&amp;objL3=ALL&amp;objL4=&amp;objL5=&amp;objL6=&amp;objL7=&amp;objL8=&amp;format=json&amp;jsonVD=Y&amp;prdSe=Y&amp;newEstPrdCnt=1&amp;outputFields=TBL_ID+TBL_NM+OBJ_ID+OBJ_NM+OBJ_NM_ENG+NM+NM_ENG+ITM_NM+ITM_NM_ENG+UNIT_NM+UNIT_NM_ENG+&amp;orgId=101&amp;tblId=DT_1B34E13"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="population-data">4. Population Data<a class="anchor" aria-label="anchor" href="#population-data"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_pop</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"https://kosis.kr/openapi/Param/statisticsParameterData.do?method=getList&amp;apiKey=인증키없음&amp;itmId=T00+T60+&amp;objL1=11010+11020+11030+11040+11050+11060+11070+11080+11090+11100+11110+11120+11130+11140+11150+11160+11170+11180+11190+11200+11210+11220+11230+11240+11250+21010+21020+21030+21040+21050+21060+21070+21080+21090+21100+21110+21120+21130+21140+21150+21510+22010+22020+22030+22040+22050+22060+22070+22510+22520+23010+23020+23030+23040+23050+23060+23070+23080+23090+23510+23520+24010+24020+24030+24040+24050+25010+25020+25030+25040+25050+26010+26020+26030+26040+26510+29010+31010+31011+31012+31013+31014+31020+31021+31022+31023+31030+31040+31041+31042+31050+31051+31052+31053+31060+31070+31080+31090+31091+31092+31100+31101+31103+31104+31110+31120+31130+31140+31150+31160+31170+31180+31190+31191+31192+31193+31200+31210+31220+31230+31240+31250+31260+31270+31280+31550+31570+31580+32010+32020+32030+32040+32050+32060+32070+32510+32520+32530+32540+32550+32560+32570+32580+32590+32600+32610+33020+33030+33040+33041+33042+33043+33044+33520+33530+33540+33550+33560+33570+33580+33590+34010+34011+34012+34020+34030+34040+34050+34060+34070+34080+34510+34530+34540+34550+34560+34570+34580+35010+35011+35012+35020+35030+35040+35050+35060+35510+35520+35530+35540+35550+35560+35570+35580+36010+36020+36030+36040+36060+36510+36520+36530+36550+36560+36570+36580+36590+36600+36610+36620+36630+36640+36650+36660+36670+36680+37010+37011+37012+37020+37030+37040+37050+37060+37070+37080+37090+37100+37510+37520+37530+37540+37550+37560+37570+37580+37590+37600+37610+37620+37630+38030+38050+38060+38070+38080+38090+38100+38110+38111+38112+38113+38114+38115+38510+38520+38530+38540+38550+38560+38570+38580+38590+38600+39010+39020+&amp;objL2=ALL&amp;objL3=000+&amp;objL4=&amp;objL5=&amp;objL6=&amp;objL7=&amp;objL8=&amp;format=json&amp;jsonVD=Y&amp;prdSe=Y&amp;newEstPrdCnt=1&amp;outputFields=TBL_ID+TBL_NM+OBJ_ID+OBJ_NM+OBJ_NM_ENG+NM+NM_ENG+ITM_ID+ITM_NM+ITM_NM_ENG+UNIT_NM+UNIT_NM_ENG+&amp;orgId=101&amp;tblId=DT_1IN1509"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-retrieval">Data Retrieval<a class="anchor" aria-label="anchor" href="#data-retrieval"></a>
</h2>
<div class="section level3">
<h3 id="setting-up-api-access">Setting up API Access<a class="anchor" aria-label="anchor" href="#setting-up-api-access"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sigmafelix/tidycensuskr" class="external-link">tidycensuskr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">kosis</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set KOSIS API key (stored in a secure file)</span></span>
<span><span class="va">kosiskey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"~/.kosiskey"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu">tidycensuskr</span><span class="fu">::</span><span class="fu"><a href="../reference/set_kosis_key.html">set_kosis_key</a></span><span class="op">(</span><span class="st">"~/.kosiskey"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="downloading-raw-data">Downloading Raw Data<a class="anchor" aria-label="anchor" href="#downloading-raw-data"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download raw datasets from KOSIS API</span></span>
<span><span class="va">df_tax</span> <span class="op">&lt;-</span> <span class="fu">kosis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kosis/man/getStatDataFromURL.html" class="external-link">getStatDataFromURL</a></span><span class="op">(</span><span class="va">url_tax_general</span><span class="op">)</span></span>
<span><span class="va">df_tax_income</span> <span class="op">&lt;-</span> <span class="fu">kosis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kosis/man/getStatDataFromURL.html" class="external-link">getStatDataFromURL</a></span><span class="op">(</span><span class="va">url_tax_income</span><span class="op">)</span></span>
<span><span class="va">df_mortality</span> <span class="op">&lt;-</span> <span class="fu">kosis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kosis/man/getStatDataFromURL.html" class="external-link">getStatDataFromURL</a></span><span class="op">(</span><span class="va">url_mortality</span><span class="op">)</span></span>
<span><span class="va">df_pop</span> <span class="op">&lt;-</span> <span class="fu">kosis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kosis/man/getStatDataFromURL.html" class="external-link">getStatDataFromURL</a></span><span class="op">(</span><span class="va">url_pop</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load administrative district lookup table</span></span>
<span><span class="va">sgg_lookup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"inst/extdata/lookup_district_code.csv"</span>, fileEncoding <span class="op">=</span> <span class="st">"EUC-KR"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-cleaning-workflow">Data Cleaning Workflow<a class="anchor" aria-label="anchor" href="#data-cleaning-workflow"></a>
</h2>
<div class="section level3">
<h3 id="administrative-code-mapping">1. Administrative Code Mapping<a class="anchor" aria-label="anchor" href="#administrative-code-mapping"></a>
</h3>
<p>The first challenge is creating a consistent mapping between
different administrative code systems used across datasets:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create administrative code mapping for provinces (sido)</span></span>
<span><span class="va">sidocd_range</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">sido_kr</span>, <span class="op">~</span><span class="va">sido_cd</span>, <span class="op">~</span><span class="va">sido_txcd</span>,</span>
<span>  <span class="st">"서울특별시"</span>, <span class="st">"11"</span>, <span class="st">"02"</span>,</span>
<span>  <span class="st">"부산광역시"</span>, <span class="st">"21"</span>, <span class="st">"15"</span>, </span>
<span>  <span class="st">"대구광역시"</span>, <span class="st">"22"</span>, <span class="st">"13"</span>,</span>
<span>  <span class="st">"인천광역시"</span>, <span class="st">"23"</span>, <span class="st">"03"</span>,</span>
<span>  <span class="st">"광주광역시"</span>, <span class="st">"24"</span>, <span class="st">"10"</span>,</span>
<span>  <span class="st">"대전광역시"</span>, <span class="st">"25"</span>, <span class="st">"06"</span>,</span>
<span>  <span class="st">"울산광역시"</span>, <span class="st">"26"</span>, <span class="st">"16"</span>,</span>
<span>  <span class="st">"세종특별자치시"</span>, <span class="st">"29"</span>, <span class="st">"09"</span>,</span>
<span>  <span class="st">"경기도"</span>, <span class="st">"31"</span>, <span class="st">"04"</span>,</span>
<span>  <span class="st">"강원특별자치도"</span>, <span class="st">"32"</span>, <span class="st">"05"</span>,</span>
<span>  <span class="st">"충청북도"</span>, <span class="st">"33"</span>, <span class="st">"07"</span>,</span>
<span>  <span class="st">"충청남도"</span>, <span class="st">"34"</span>, <span class="st">"08"</span>,</span>
<span>  <span class="st">"전라북도"</span>, <span class="st">"35"</span>, <span class="st">"11"</span>,</span>
<span>  <span class="st">"전라남도"</span>, <span class="st">"36"</span>, <span class="st">"12"</span>,</span>
<span>  <span class="st">"경상북도"</span>, <span class="st">"37"</span>, <span class="st">"14"</span>,</span>
<span>  <span class="st">"경상남도"</span>, <span class="st">"38"</span>, <span class="st">"17"</span>,</span>
<span>  <span class="st">"제주특별자치도"</span>, <span class="st">"39"</span>, <span class="st">"18"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tax-data-processing">2. Tax Data Processing<a class="anchor" aria-label="anchor" href="#tax-data-processing"></a>
</h3>
<p>Transform raw tax data into a standardized format:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_tax_compact</span> <span class="op">&lt;-</span> <span class="va">df_tax</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span></span>
<span>    sgg_tax_global <span class="op">=</span> <span class="va">C1</span>,           <span class="co"># Administrative code</span></span>
<span>    tax_global_total_milkrw <span class="op">=</span> <span class="va">DT</span>   <span class="co"># Tax value in million KRW</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>    <span class="va">sgg_lookup</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sgg_tax_global"</span>, <span class="st">"sido_en"</span>, <span class="st">"sigun_en"</span>, <span class="st">"sigungu_cd"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    multiple <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df_tax_income_compact</span> <span class="op">&lt;-</span> <span class="va">df_tax_income</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span></span>
<span>    sgg_tax_income <span class="op">=</span> <span class="va">C1</span>,</span>
<span>    tax_income_total_milkrw <span class="op">=</span> <span class="va">DT</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>    <span class="va">sgg_lookup</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sgg_tax_income"</span>, <span class="st">"sido_en"</span>, <span class="st">"sigun_en"</span>, <span class="st">"sigungu_cd"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    multiple <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="population-data-processing">3. Population Data Processing<a class="anchor" aria-label="anchor" href="#population-data-processing"></a>
</h3>
<p>Clean and reshape population data with gender disaggregation:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_pop2</span> <span class="op">&lt;-</span> <span class="va">df_pop</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sex <span class="op">=</span> <span class="fu">plyr</span><span class="fu">::</span><span class="fu">mapvalues</span><span class="op">(</span><span class="va">C2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span>, <span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    type <span class="op">=</span> <span class="fu">plyr</span><span class="fu">::</span><span class="fu">mapvalues</span><span class="op">(</span><span class="va">ITM_ID</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T00"</span>, <span class="st">"T60"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"population"</span>, <span class="st">"population_nonrelative"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">C1</span>, <span class="va">C1_NM</span>, <span class="va">sex</span>, <span class="va">type</span>, <span class="va">DT</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">sex</span><span class="op">)</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">DT</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    sigungu_cd <span class="op">=</span> <span class="va">C1</span>,</span>
<span>    sigungu_kr <span class="op">=</span> <span class="va">C1_NM</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sigungu_cd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">sigungu_cd</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>    <span class="va">sgg_lookup</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sigungu_cd"</span>, <span class="st">"sido_en"</span>, <span class="st">"sigungu_1_en"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"sigungu_cd"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mortality-data-processing">4. Mortality Data Processing<a class="anchor" aria-label="anchor" href="#mortality-data-processing"></a>
</h3>
<p>Process mortality data with gender-specific rates:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_mort_clean</span> <span class="op">&lt;-</span> <span class="va">df_mortality</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span></span>
<span>    sigungu_cd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">C2</span><span class="op">)</span>, </span>
<span>    sex_cd <span class="op">=</span> <span class="va">C3</span>,</span>
<span>    category <span class="op">=</span> <span class="st">"All causes"</span>,</span>
<span>    r_mortality_100k <span class="op">=</span> <span class="va">DT</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">sex_cd</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">r_mortality_100k</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>    <span class="va">sgg_lookup</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sigungu_cd"</span>, <span class="st">"sido_en"</span>, <span class="st">"sigungu_1_en"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"sigungu_cd"</span>,</span>
<span>    multiple <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="transforming-to-tidy-format">Transforming to Tidy Format<a class="anchor" aria-label="anchor" href="#transforming-to-tidy-format"></a>
</h2>
<p>The key feature of <code>tidycensuskr</code> is converting
wide-format, multiple-dataset structure into a single, long-format tidy
dataset:</p>
<div class="section level3">
<h3 id="convert-each-dataset-to-long-format">1. Convert Each Dataset to Long Format<a class="anchor" aria-label="anchor" href="#convert-each-dataset-to-long-format"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Tax data to long format</span></span>
<span><span class="va">df_tax_long</span> <span class="op">&lt;-</span> <span class="va">df_tax_compact</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="st">"tax_global_total_milkrw"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"tax"</span>,</span>
<span>    class1 <span class="op">=</span> <span class="st">"global"</span>,</span>
<span>    class2 <span class="op">=</span> <span class="st">"total"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"million KRW"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Income tax data to long format  </span></span>
<span><span class="va">df_tax_income_long</span> <span class="op">&lt;-</span> <span class="va">df_tax_income_compact</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="st">"tax_income_total_milkrw"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"tax"</span>,</span>
<span>    class1 <span class="op">=</span> <span class="st">"income"</span>, </span>
<span>    class2 <span class="op">=</span> <span class="st">"total"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"million KRW"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Population data to long format</span></span>
<span><span class="va">df_pop_long</span> <span class="op">&lt;-</span> <span class="va">df_pop2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">7</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html" class="external-link">separate</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"name"</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"type"</span>, <span class="st">"class1"</span>, <span class="st">"class2"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mortality data to long format</span></span>
<span><span class="va">df_mort_long</span> <span class="op">&lt;-</span> <span class="va">df_mort_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">5</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    class2 <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">name</span> <span class="op">==</span> <span class="st">"0"</span> <span class="op">~</span> <span class="st">"total"</span>,</span>
<span>      <span class="va">name</span> <span class="op">==</span> <span class="st">"1"</span> <span class="op">~</span> <span class="st">"male"</span>, </span>
<span>      <span class="va">name</span> <span class="op">==</span> <span class="st">"2"</span> <span class="op">~</span> <span class="st">"female"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>    <span class="op">)</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"per 100k population"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"mortality"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>class1 <span class="op">=</span> <span class="va">category</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="combine-into-single-tidy-dataset">2. Combine into Single Tidy Dataset<a class="anchor" aria-label="anchor" href="#combine-into-single-tidy-dataset"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bind all datasets into one comprehensive long-format dataset</span></span>
<span><span class="va">censuskor</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>    <span class="va">df_tax_long</span>,</span>
<span>    <span class="va">df_tax_income_long</span>,</span>
<span>    <span class="va">df_pop_long</span>,</span>
<span>    <span class="va">df_mort_long</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    adm1 <span class="op">=</span> <span class="va">sido_en</span>,</span>
<span>    adm2 <span class="op">=</span> <span class="va">sigungu_1_en</span>,</span>
<span>    adm2_other <span class="op">=</span> <span class="va">sigun_en</span>,</span>
<span>    adm2_code <span class="op">=</span> <span class="va">sigungu_cd</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fl">2020</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">year</span>, <span class="va">adm1</span>, <span class="va">adm2</span>, <span class="va">adm2_other</span>, <span class="va">adm2_code</span>,</span>
<span>    <span class="va">type</span>, <span class="va">class1</span>, <span class="va">class2</span>, <span class="va">unit</span>, <span class="va">value</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-result-a-tidy-dataset">The Result: A Tidy Dataset<a class="anchor" aria-label="anchor" href="#the-result-a-tidy-dataset"></a>
</h2>
<p>The final <code>censuskor</code> dataset has a consistent
structure:</p>
<ul>
<li>
<strong>year</strong>: Census year (2020)</li>
<li>
<strong>adm1</strong>: Province-level administrative name (in
English)</li>
<li>
<strong>adm2</strong>: District-level administrative name (in
English)<br>
</li>
<li>
<strong>adm2_other</strong>: Alternative district name</li>
<li>
<strong>adm2_code</strong>: Numeric administrative code</li>
<li>
<strong>type</strong>: Data type (“population”, “tax”,
“mortality”)</li>
<li>
<strong>class1</strong>: First-level classification (e.g., “global”,
“income”, “All causes”)</li>
<li>
<strong>class2</strong>: Second-level classification (e.g., “total”,
“male”, “female”)</li>
<li>
<strong>unit</strong>: Unit of measurement</li>
<li>
<strong>value</strong>: Numeric value</li>
</ul>
<div class="section level3">
<h3 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sigmafelix/tidycensuskr" class="external-link">tidycensuskr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the cleaned dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">censuskor</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">censuskor</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter for Seoul population data</span></span>
<span><span class="va">seoul_pop</span> <span class="op">&lt;-</span> <span class="va">censuskor</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">adm1</span> <span class="op">==</span> <span class="st">"Seoul"</span>, <span class="va">type</span> <span class="op">==</span> <span class="st">"population"</span>, <span class="va">class1</span> <span class="op">==</span> <span class="st">"population"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">adm2</span>, <span class="va">class2</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">class2</span>, values_from <span class="op">=</span> <span class="va">value</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">seoul_pop</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="benefits-of-this-approach">Benefits of This Approach<a class="anchor" aria-label="anchor" href="#benefits-of-this-approach"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Consistent Structure</strong>: All datasets follow the same
tidy format principles</li>
<li>
<strong>Easy Filtering</strong>: Users can easily filter by
geography, data type, or demographic group</li>
<li>
<strong>Analysis-Ready</strong>: No additional cleaning required for
most analyses</li>
<li>
<strong>Flexible</strong>: Can be easily reshaped for specific
visualization or modeling needs</li>
<li>
<strong>Extensible</strong>: New data types can be added following
the same pattern</li>
</ol>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>While the <code>kosis</code> package provides general access to
Korean statistical data, <code>tidycensuskr</code> fills the specific
need for <strong>cleaned, tidy, analysis-ready Korean census and
administrative data</strong>. The extensive data cleaning workflow
demonstrated in this vignette transforms complex, multilingual,
multi-format raw data into a consistent, research-friendly format that
follows tidy data principles.</p>
<p>This preprocessing saves researchers significant time and reduces the
potential for errors in data handling, allowing them to focus on
analysis rather than data wrangling.</p>
<div class="section level3">
<h3 id="future-directions">Future Directions<a class="anchor" aria-label="anchor" href="#future-directions"></a>
</h3>
<ul>
<li>Integration of additional years of census data (2015, 2010)</li>
<li>Addition of economic indicators and environmental data</li>
<li>Real-time data updates as new census releases become available</li>
<li>Expanded geographic coverage including sub-district (eup/myeon/dong)
level data</li>
</ul>
<hr>
<p><strong>Note</strong>: This vignette shows the data cleaning process
for educational purposes. The actual <code>censuskor</code> dataset in
the package is the result of this workflow and is ready for immediate
use.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Insang Song, Sohyun Park, Hyesop Shin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
